\section{Continuous functionals. Hahn-Banach theorem}
$X$ --- linear set, $f \colon X \to \R$ --- linear functional if $f(\alpha x_1 +
\beta x_2) = \alpha f(x_1) + \beta f(x_2)$ \\
Let $X$ be arbitrary normed space. We call functional $f$ continuous on $X$ if
$x_n \to x \implies f(x_n) \to f(x)$. Because in normed space addition and
scalar multiplication are continuous, by functional lineriarity $f(x_n) - f(x) =
f(x_n - x),\ x_n \to x \iff x_n - x \to 0,\ f(0) = 0$\\

\begin{stm}
  $f$ is continuous on $X$ if and only if $f$ is continuous in 0.
\end{stm}

\begin{defn}
  $\sup\limits_{\|x\| \leq 1}{|f(x)|} = \|f\|$, $f$ --- limited $\iff \|f\| < +\infty$
\end{defn}

\begin{thm}
  Linear functional is continuous if and only if it is limited.
\end{thm}

\begin{proof}
  Let $f$ be limited linear functional:
  \begin{align*}
    &\|f\| < +\infty,\ |f(x)| \leq 
      \|f\| \cdot \|x\|,\ x_n \to 0 \implies \|x_n\| \to 0 \\
    &|f(x_n)| \leq \tendsto{\|f\| \cdot \|x_n\|}{0} \implies f(x_n) \to 0
  \end{align*}
  Let $f$ be continuous functional: 
  \begin{align*}
    &\|f\| = +\infty = \sup\limits_{\|x\| \leq
      1}|f(x)|,\ \forall b \in \N : \exists x_n : \|x_n\| \leq 1,\ |f(x_n)| > b \\
    &\abs{f(\dfrac{x_n}{n})} > 1,\ \norm{\dfrac{x_n}{n}} = \dfrac{\|x_n\|}{n} \leq
      \dfrac{1}{n}\ \dfrac{x_n}{n} \to 0 \implies f(\dfrac{x_n}{n}) \to 0 \contr \qedhere
  \end{align*}

\end{proof}

\begin{note}
  By functional lineriarity it's kernel is linear set.
\end{note}

\begin{thm}
  Functional $f$ is continuous if and only if $\ker{f}$ is closed in $X$.
\end{thm}

\begin{proof}
  Let $f$ be continuous, then 
  \[
    x_n \in \ker{f},\ x_n \to x \implies
    \tendsto{f(x_n)}{0} \to f(x) \implies f(x) = 0 \implies x \in \ker{f}
  \]
  Let $\ker{f}$ be closed, $\codim{(\ker{f})} = 1$
  \begin{align*}
    &\exists e \in X : \forall x = y + t \cdot e,\ y \in \ker{f},\ t \in \R \\
    &f(x) = f(y) + t \cdot f(e) = t \cdot f(e) \\
    &x_n = y_n + t_n \cdot e \to x = y + t \cdot e,\ f(x_n) = t_n \cdot f(e)\\
    &?t_n \to t \implies t_n \cdot f(e) \to t \cdot f(e) = f(x) \implies f(x_n) \to
      f(x). \\
    &x_n = y_n + t_n \cdot e,\ x = y + t \cdot e,\ x_n \to x,\ y_n,y \in \ker{f}.
  \end{align*}
  If we can prove that all converging subsequences $t_{n_k} \to t^*$ then $t_n$ will
  converge too. 
  \begin{align*}
    &y_{n_k} = x_{n_k} - t_{n_k} \cdot e \\
    &y_{n_k} \in \ker{f} \to x - t^* \cdot e \implies z = x - t^*
      \cdot e \in \ker{f} \\
    &x = z + t^* \cdot e,\ x = y + t \cdot e \implies t^* = t. \qedhere
  \end{align*}
\end{proof}

\noindent
$X$ --- normed space, $Y$ --- linear set in $X$, $Y$ dense in $X$.
$C[0, 1]$ \\
$\forall \epsilon > 0\ \exists P_n(x) : |f(x) - P_n(x)| < \epsilon\ \forall x \in [0, 1]$\\ 
S.N. Bernstein constructively showed these polynoms.
\[
  B_n(f, x) = \sum\limits_{k = 0}^n C_n^k f(\dfrac{k}{n}) x^k (1 - x)^{n - k}
\]
From functional analysis point of view Weierstrass theorem means that:
\[
  Y = \{\text{all}\ P_n(x)\}\ \text{--- linear set in}\ C[0, 1]
\]
That means $Y$ is dense in $C[0, 1]$.

\begin{note}
  Let $f_0$ be continuous, linear functional on $Y$. $\exists ?$ continuous,
  linear functional $f$ on $X : f|_Y = f_0$
\end{note}

\begin{thm}
  Given task is always has (unique) solution, also $\|f\|_X = \|f_0\|_Y$
\end{thm}

\begin{proof}
  $f$ --- continuous on $X$, $g$ --- continuous on $X$, $f|_Y = g|_Y$
  \begin{align*}
    &\forall x \in X,\ \cl{Y} = X\ \exists y_n \in Y : y_n \to x \\
    &f(y_n) \to f(x),\ g(y_n) \to g(x) \implies f(x) = g(x) \\
    &\cl{Y} = X\ \forall x \in X\ \exists y_n \in Y : y_n \to x\\
    &f_0\ \text{--- continuous on}\ Y \implies \|f_0\|_Y < +\infty \\
    &|f_0(y_m) - f_0(y_n)| = |f_0(y_n - y_m)| \leq \|f_0\|_Y \cdot \tendsto{\|y_n - y_m\|}{0} \implies \{f_0(y_n)\}\ \text{--- Cauchy seq.} \\
    &f(x) \coloneqq \lim f_0(y_n),\ y_n \to x,\ y_n' \to x \implies \lim f_0(y_n) = \lim f_0(y_n') \\
    &|f_0(y_n) - f_0(y_n')| \leq \|f_0\|_Y \cdot \tendsto{\|y_n - y_n'\|}{0} \\
    &\tendsto{f_0(y_n)}{a} - \tendsto{f_0(y_n')}{b} \to 0 \implies a = b \\
    &f(x) = \lim f_0(y_n),\ y_n \to x
  \end{align*}
  $f(x)$ --- linear functional. \\
  $\|f\|_X = \|f_0\|_Y$
  \begin{align*}
    \begin{cases}
      \|f\|_X = \sup\limits_{\|x\| \leq 1} |f(x)| \\
      \|f_0\|_Y = \sup\limits_{\|y\| \leq 1} |f_0(y)|
    \end{cases}
    \implies \|f_0\|_Y \leq \|f\|_X
  \end{align*}
  By the norm definition it is clear that supremum is achievable on the sphere.
  \begin{align*}
    &\sup_{\|x\| \leq 1}|f(x)| \leq \sup_{\|x'\| = 1} |f(x')| \\
    &\|x\| = 1,\ \exists y_n \in Y : y_n \to x,\ \|y_n\| \to \|x\| = 1 \\
    &y_n' = \dfrac{y_n}{\|y_n\|} \to \dfrac x1 = 1 \\
    &\|y_n'\| = 1,\ y_n' \in Y \\
    &\|x\| = 1\ \exists y_n \in Y : \|y_n\| = 1 \implies y_n \to x \\
    &f_0(y_n) \to f(x) \\
    &|f_0(y_n)| \leq \|f_0\|_Y,\ \|y_n\| = 1 \\
    &|f(x)| \leq \|f_0\|_Y \implies \|f\|_x \leq \|f_0\|_Y \qedhere 
  \end{align*}
\end{proof}

$X$, $p(x)$ --- seminorm, $Y$ --- linear set in $X$. \\
$f_0$ --- linear functional on $Y$, satisfying the so called 
seminorm submission property, i.e. 
\[
  \forall y \in Y\ |f_0(y)| \leq p(y)
\]

\begin{thm}[Hahn-banach]
  Any linear functional on linear set in $X$ satisfying some
  seminorm submission property on $Y$, can be continued to $X$ saving this
  property. \\
  $\exists f\colon X \to \R$ --- linear functional
  \begin{enumerate}
  \item $f|_Y = f_0$
  \item $\forall x \in X \implies |f(x)| \leq p(x)$
  \end{enumerate}
\end{thm}

\begin{lemma}[Banach]
  $X$ --- linear set, $p(x)$ --- seminorm, $Y$ --- linear eigen subset X.
  $f_0 \colon Y \to \R$ --- linear functional. $|f_0(y)| \leq p(y)$ \\
  $e \notin Y.\ Y_1 = \L(Y, e) = \Set{\alpha y + \beta e,\ y \in Y, \alpha,
    \beta \in \R}$ \\
  $\implies \exists f \colon Y_1 \to R$ --- linear.
  \begin{enumerate}
  \item $f|_Y = f_0$
  \item on $Y_1\ |f(y)| \leq p(y)$
  \end{enumerate}
\end{lemma}

\begin{proof}
  $\alpha y + \beta e \in Y_1$, $f$ --- linear $f(\alpha y + \beta e) = \alpha
  f(y) + \beta f(e)$, $f|_Y = f_0$ \\
  $f(\alpha y + \beta e) = \alpha f_0(y) + \beta f(e)$ \\
  With any value of $f(e)$ we will get $f_0$ on Y. $c \coloneqq f(e)$. 
  \begin{align*}
    &|f(\alpha y + \beta e)| \leq p(\alpha y + \beta e) \\
    &\alpha y \in Y,\ \alpha y, y \in Y \\
    &f(y \in Y + t \cdot e) = f_0(y) + t \cdot c \\
    &|f_0(y) - t \cdot c| \leq p(y - t \cdot e)\ \forall y \in Y,\ \forall t \in \R \\
    &|f_0(y)| \leq p(y) \text{--- given}. \\
    &f_0(y) - p(y - t \cdot e) \leq t \cdot c \leq f_0(y) + p(y - t \cdot e),\ t >
      0\ (t < 0) \text{is the same}. \\
    &f_0(\dfrac{y}{t}) - p(\dfrac{y}{t} - e) \leq c \leq f_0(\dfrac{y}{t}) +
      p(\dfrac{y}{t} - e),\ \dfrac{y}{t} \in Y \\
    &f_0(y) - p(y - e) \leq c \leq f_0(y) + p(y - e) \\
    &\forall y_1, y_2 \in Y\ f_0(y_1) - p(y_1 - e) \leq c \leq f_0(y_2) + p(y_2 -
      e)
  \end{align*}
  \begin{align*}
    f_0(y_1) - f_0(y_2) &\leq p(y_1 - e) + p(y_2 - e) f_0(y_1 - y_2) \leq \\ 
                        &\leq p(y_1 - y_2) = p((y_1 - e) - (y_2 - e)) \leq p(y_1 - e) + p(y_2 - e)
  \end{align*}
  \begin{align*}
    &\sup\limits_{y \in Y}(f_0(y) - p(y - e)) \leq f_0(y_2) + p(y_2 - e) \\
    &\underbrace{\sup\limits_Y (f_0(y) - p(y - e))}_{a} \leq \underbrace{\inf\limits_Y (f_0(y) + p(y - e))}_{b}
      \in \R \\
    &c \in [a, b] \neq \varnothing \qedhere
  \end{align*}
  \begin{note}
    If $a < b$ there exists infinetely many continuations.
  \end{note}
\end{proof}

To fully prove Hahn-Banach theorem, we need to enter the theory of semi-ordered
sets and discuss Zorn's lemma. We will prove only the separable normed space case with
$p(x) = a \cdot \|x\|,\ a > 0$ 

\begin{thm}[Hahn-Banach (separable normed space case)]
  Let $X$ be separable normed space, i.e. there exists countable, dense set in it.
  Let $Y$ be linear set (not subspace) in $X$, $f_0$ --- continuous linear
  functional on $Y$, then there exists continuous linear functional $f$ on $X$:
  \begin{enumerate}
  \item $f|_Y = f_0$
  \item $\|f\|_X = \|f_0\|_Y$
  \end{enumerate}
\end{thm}

\begin{proof}
  If $X$ is separable, $A = \{a_1, \dotsc, a_n, \dotsc\} : \cl{A} = X$. We will
  assume that all $a_n$ are distinct. It is clear that separability gives us a
  way to define $L_0 = Y,\ L_n = \L\{L_{n - 1}, a_n\} \subset L_{n + 1},\ L =
  \bigcup\limits_{n = 1}^\infty L_n$ --- linear set and $\cl{L} = X$.
  By the lemma we can continue $f_0$ from $L_0$ to $L_1$, from $L_1$ to $L_2$ and
  so on. And then by the first theorem we can continue it on the $X$.
\end{proof}

\begin{cor}
  Let $X$ be normed space then $\forall x_0 \neq 0\ \exists f$ --- linear
  functional:
  \begin{enumerate}
  \item $\|f\| = 1$
  \item $f(x_0) = \|x_0\|$
  \end{enumerate}
\end{cor}

\begin{proof}
  On $Y = \Set{t x_0,\ t \in \R}$ we build linear functional $f_0 : \|f_0\|_Y =
  1,\ f_0(x) = \|x_0\|$
  \begin{align*}
    &f_0(t x_0) = t \cdot f_0(x_0) \\
    &f_0(x_0) = \|x_0\|,\ t = 1 \\
    &f_0(t x_0) = t \cdot \|x_0\|
  \end{align*}
\end{proof}

\begin{cor}
  $\forall x_1 \neq x_2\ \exists\ \text{linear limited functional} : f(x_1)
  \neq f(x_2)$
\end{cor}

\begin{thm}[Riesz]
  $H$ --- Hilbert space, $f$ --- linear, limited functional on $H$, then $\exists
  y \in H\colon$
  \begin{enumerate}
  \item $\forall x \in H\ f(x) = \inprod{x, y}$
  \item $\|f\| = \|y\|$
  \end{enumerate}
\end{thm}

\begin{proof}
  First, we will prove that $\|f\| = \|y\|$. Let $f(x) = \inprod{x, y}$, then by Shwarz inequality:
  \begin{align*}
    &|f(x)| = |\inprod{x. y}| \leq \|y\| \cdot \|x\| \implies \|f\| \leq \|y\| \\
    &x_0 = \dfrac{y}{\|y\|},\ \|x_0\| = 1,\ |f(x_0)| = \dfrac{|f(y)|}{\|f(y)\|} =
      \dfrac{|\inprod{y, y}|}{\|y\|} = \dfrac{\|y\|^2}{\|y\|} = \|y\| \\ 
    &\|f\| =
      \sup\limits_{\|x\| \leq 1}|f(x)|,\ \|x_0\| = 1, \|f\| \leq \|y\| \implies
      \|f\| = \|y\|
  \end{align*}
  Now we prove that $\forall x \in H\ f(x) = \inprod{x, y}$ \\
  $H_1 = \ker{f}$ --- closed, $H_1$ --- subspace of $H$. Let $H_2 =
  H_1^{\perp},\ H = H_1 \oplus H_2$ \\
  $H_1$ --- hyperplane $\implies \codim{H_1} = 1, \dim{H_1} = 1\ H_2 = \Set{te,\ t\in
    \R,\ e \in H_2} \\
  \forall x \in H\ x \overset{!}{=} x_1 \in H_1 + t \cdot e$ \\
  $f(x) = f(x_1) + t \cdot f(e) = t \cdot f(e)$. Let $y = \alpha \cdot e,\ \alpha
  \in \R\ \inprod{x, \alpha e} = \inprod{x_1 + te, \alpha e} = \alpha t
  \|e\|^2$. \\
  Choose such $\alpha$, so that $f(x) = \inprod{x, \alpha e}\ \forall x \in H,\ t
  \cdot f(e) = \alpha t \|e\|^2,\ \alpha = \dfrac{f(e)}{\|e\|^2},\ y =
  \dfrac{f(e)}{\|e\|^2} \cdot e$ 
\end{proof}

\begin{ex}
  $H = L_2[0, 1]$ \\
  $\forall\ \text{linear limited functional}\ L_2[0, 1]$ \\
  $\exists g \in L_2[0, 1]$ \\
  $f(\hat{g}) = \int\limits_0^1 f(t)g(t) dt$
\end{ex}

\begin{ex}
  $C[0, 1]$ $f$ --- limear limited functional on $C[0, 1]$ \\
  $\exists g$ --- limited вар on [0, 1]
  $f(\hat{g}) = \int\limits_0^1 \hat{g}(t)dg(t)$ --- Riemann--Stieltjes integral.
\end{ex}

